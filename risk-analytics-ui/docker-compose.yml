# Risk Analytics UI â€” API + Web (read-only DB).
# Run from repo root with main stack: docker compose -f docker-compose.yml -f risk-analytics-ui/docker-compose.yml up -d
# Or run standalone (set POSTGRES_HOST to your postgres host): docker compose -f risk-analytics-ui/docker-compose.yml up -d

services:
  risk-analytics-ui-api:
    build:
      context: ./api
      dockerfile: Dockerfile
    container_name: risk-analytics-ui-api
    environment:
      POSTGRES_HOST: ${POSTGRES_HOST:-postgres}
      POSTGRES_PORT: ${POSTGRES_PORT:-5432}
      POSTGRES_DB: ${POSTGRES_DB:-netbet}
      POSTGRES_USER: ${POSTGRES_ANALYTICS_READER_USER:-netbet_analytics_reader}
      POSTGRES_PASSWORD: ${POSTGRES_ANALYTICS_READER_PASSWORD}
      PGOPTIONS: -c search_path=analytics
    ports:
      - "8000:8000"
    restart: unless-stopped

  risk-analytics-ui-web:
    build:
      context: ./web
      dockerfile: Dockerfile
    container_name: risk-analytics-ui-web
    ports:
      - "3000:80"
    depends_on:
      - risk-analytics-ui-api
    restart: unless-stopped
