# Risk Analytics UI â€” API + Web (read-only DB).
# Run from repo root with main stack: docker compose -f docker-compose.yml -f risk-analytics-ui/docker-compose.yml up -d
# Or run standalone: ensure netbet_default exists (start main stack first) and set POSTGRES_HOST to your postgres container name.

services:
  risk-analytics-ui-api:
    build:
      context: ./api
      dockerfile: Dockerfile
    container_name: risk-analytics-ui-api
    env_file:
      - ../.env
    environment:
      POSTGRES_HOST: ${POSTGRES_HOST:-netbet-postgres}
      POSTGRES_PORT: ${POSTGRES_PORT:-5432}
      POSTGRES_DB: ${POSTGRES_DB:-netbet}
      PGOPTIONS: -c search_path=analytics
    ports:
      - "8000:8000"
    restart: unless-stopped
    networks:
      - default
      - netbet_default

  risk-analytics-ui-web:
    build:
      context: ./web
      dockerfile: Dockerfile
    container_name: risk-analytics-ui-web
    ports:
      - "3000:80"
    depends_on:
      - risk-analytics-ui-api
    restart: unless-stopped
    networks:
      - default

networks:
  netbet_default:
    external: true
